(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{236:function(e,t,n){e.exports=n(510)},255:function(e,t){},257:function(e,t){},273:function(e,t){},275:function(e,t){},441:function(e,t){},509:function(e,t,n){},510:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(233),r=n.n(i),o=n(512),l=n(41),u=n(42),c=n(44),d=n(43),h=n(45),m=n(23),f="https://s3.amazonaws.com/onename/avatar-placeholder.png",p=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return f}},username:"",newStatus:"",statuses:[],statusIndex:0,isLoading:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props;t.handleSignOut,t.userSession,this.state.person,this.state.username;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{style:{zIndex:"1000"}},s.a.createElement("textarea",{className:"input-status-find",value:this.state.findProfile,onChange:function(t){return e.handleFindProfile(t)},placeholder:"Find a profile"}),s.a.createElement("button",{className:"btn-find btn-primary-find btn-lg-find",onClick:function(t){return e.handleFindProfileSubmit(t)}},"Submit")))}},{key:"componentWillMount",value:function(){}},{key:"handleNewStatusChange",value:function(e){this.setState({newStatus:e.target.value})}},{key:"handleFindProfile",value:function(e){this.setState({findProfile:e.target.value})}},{key:"handleNewStatusSubmit",value:function(e){this.saveNewStatus(this.state.newStatus),this.setState({newStatus:""})}},{key:"handleFindProfileSubmit",value:function(e){window.location.href="https://thirsty-roentgen-965c99.netlify.com/"+this.state.findProfile+".id.blockstack"}},{key:"saveNewStatus",value:function(e){var t=this,n=this.props.userSession,a=this.state.statuses,s={id:this.state.statusIndex++,text:e.trim(),created_at:Date.now()};a.unshift(s);n.putFile("statuses.json",JSON.stringify(a),{encrypt:!1}).then(function(){t.setState({statuses:a})})}},{key:"fetchData",value:function(){var e=this,t=this.props.userSession;if(this.setState({isLoading:!0}),this.isLocal()){t.getFile("statuses.json",{decrypt:!1}).then(function(n){var a=JSON.parse(n||"[]");e.setState({person:new m.Person(t.loadUserData().profile),username:t.loadUserData().username,statusIndex:a.length,statuses:a})}).finally(function(){e.setState({isLoading:!1})})}else{var n=this.props.match.params.username;Object(m.lookupProfile)(n).then(function(t){e.setState({person:new m.Person(t),username:n})}).catch(function(e){console.log("could not resolve profile")});var a={username:n,decrypt:!1};t.getFile("statuses.json",a).then(function(t){var n=JSON.parse(t||"[]");e.setState({statusIndex:n.length,statuses:n})}).catch(function(e){console.log("could not fetch statuses")}).finally(function(){e.setState({isLoading:!1})})}}}]),t}(a.Component),v="https://s3.amazonaws.com/onename/avatar-placeholder.png",S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return v}},username:"",newStatus:"",statuses:[],statusIndex:0,isLoading:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.handleSignOut,a=t.userSession,i=this.state.person,r=this.state.username;return!a.isSignInPending()&&i?s.a.createElement("div",null,s.a.createElement(p,null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"new-status"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("div",{className:"avatar-con"},s.a.createElement("img",{src:i.avatarUrl()?i.avatarUrl():v,className:"img-rounded avatar",id:"avatar-image"}),s.a.createElement("div",{className:"username"},s.a.createElement("h1",null,s.a.createElement("span",{id:"heading-name"},i.name()?i.name():"Nameless Person")),s.a.createElement("span",null,r),this.isLocal()&&s.a.createElement("span",null,"\xa0|\xa0",s.a.createElement("a",{onClick:n.bind(this)},"(Logout)")))))),this.isLocal()&&s.a.createElement("div",{className:"new-status"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("textarea",{className:"input-status",value:this.state.newStatus,onChange:function(t){return e.handleNewStatusChange(t)},placeholder:"What's on your mind?"})),s.a.createElement("div",{className:"col-md-12 text-right"},s.a.createElement("button",{className:"btn btn-primary btn-lg",onClick:function(t){return e.handleNewStatusSubmit(t)}},"Submit"))),s.a.createElement("div",{className:"col-md-12 statuses"},this.state.isLoading&&s.a.createElement("span",null,"Loading..."),this.state.statuses.map(function(e){return s.a.createElement("div",{className:"status",key:e.id},e.text)})),s.a.createElement("div",null,s.a.createElement("a",{className:"Nav-brand-logo"})),s.a.createElement("span",null,"\xa0|\xa0",s.a.createElement("a",{onClick:n.bind(this)},"(Logout)")))):null}},{key:"componentWillMount",value:function(){var e=this.props.userSession;this.setState({person:new m.Person(e.loadUserData().profile),username:e.loadUserData().username})}},{key:"handleNewStatusChange",value:function(e){this.setState({newStatus:e.target.value})}},{key:"handleFindProfile",value:function(e){this.setState({findProfile:e.target.value})}},{key:"handleNewStatusSubmit",value:function(e){this.saveNewStatus(this.state.newStatus),this.setState({newStatus:""})}},{key:"handleFindProfileSubmit",value:function(e){window.location.href="https://thirsty-roentgen-965c99.netlify.com/"+this.state.findProfile+".id.blockstack"}},{key:"saveNewStatus",value:function(e){var t=this,n=this.props.userSession,a=this.state.statuses,s={id:this.state.statusIndex++,text:e.trim(),created_at:Date.now()};a.unshift(s);n.putFile("statuses.json",JSON.stringify(a),{encrypt:!1}).then(function(){t.setState({statuses:a})})}},{key:"fetchData",value:function(){var e=this,t=this.props.userSession;if(this.setState({isLoading:!0}),this.isLocal()){t.getFile("statuses.json",{decrypt:!1}).then(function(n){var a=JSON.parse(n||"[]");e.setState({person:new m.Person(t.loadUserData().profile),username:t.loadUserData().username,statusIndex:a.length,statuses:a})}).finally(function(){e.setState({isLoading:!1})})}else{var n=this.props.match.params.username;Object(m.lookupProfile)(n).then(function(t){e.setState({person:new m.Person(t),username:n})}).catch(function(e){console.log("could not resolve profile")});var a={username:n,decrypt:!1};t.getFile("statuses.json",a).then(function(t){var n=JSON.parse(t||"[]");e.setState({statusIndex:n.length,statuses:n})}).catch(function(e){console.log("could not fetch statuses")}).finally(function(){e.setState({isLoading:!1})})}}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"isLocal",value:function(){return!this.props.match.params.username}}]),t}(a.Component),g=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.handleSignIn;return s.a.createElement("div",{className:"panel-landing",id:"section-1"},s.a.createElement("h1",{className:"landing-heading"},"Instachain Powered by Blockstack!"),s.a.createElement("p",{className:"lead"},s.a.createElement("button",{className:"btn btn-primary btn-lg",id:"signin-button",onClick:e.bind(this)},"Sign In with Blockstack")),s.a.createElement("div",null,s.a.createElement("a",{className:"Nav-brand-logo"})))}}]),t}(a.Component),b=n(514),y=n(513),w=new m.AppConfig(["store_write","publish_data"]),E=new m.UserSession({appConfig:w}),N=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"handleSignIn",value:function(e){e.preventDefault(),E.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),E.signUserOut(window.location.origin)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"site-wrapper"},s.a.createElement("div",{className:"site-wrapper-inner"},E.isUserSignedIn()?s.a.createElement(b.a,null,s.a.createElement(y.a,{path:"/:username?",render:function(t){return s.a.createElement(S,Object.assign({userSession:E,handleSignOut:e.handleSignOut},t))}})):s.a.createElement(g,{userSession:E,handleSignIn:this.handleSignIn})))}},{key:"componentDidMount",value:function(){var e=this;E.isSignInPending()&&E.handlePendingSignIn().then(function(t){window.history.replaceState({},document.title,"/"),e.setState({userData:t})})}}]),t}(a.Component);n(508),n(509);r.a.render(s.a.createElement(o.a,null,s.a.createElement(N,null)),document.getElementById("root"))}},[[236,1,2]]]);
//# sourceMappingURL=main.08419f6a.chunk.js.map