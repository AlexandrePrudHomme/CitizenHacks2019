(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{236:function(e,t,a){e.exports=a(510)},255:function(e,t){},257:function(e,t){},273:function(e,t){},275:function(e,t){},441:function(e,t){},509:function(e,t,a){},510:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(233),r=a.n(i),o=a(512),l=a(55),c=a(56),u=a(59),m=a(57),d=a(60),h=a(40),p="https://s3.amazonaws.com/onename/avatar-placeholder.png",f=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return p}},username:"",newStatus:"",statuses:[],statusIndex:0,isLoading:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.handleSignOut,n=t.userSession,i=this.state.person,r=this.state.username;return!n.isSignInPending()&&i?s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-offset-3 col-md-6"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("div",{className:"avatar-section"},s.a.createElement("img",{src:i.avatarUrl()?i.avatarUrl():p,className:"img-rounded avatar",id:"avatar-image"}),s.a.createElement("div",{className:"username"},s.a.createElement("h1",null,s.a.createElement("span",{id:"heading-name"},i.name()?i.name():"Nameless Person")),s.a.createElement("span",null,r),this.isLocal()&&s.a.createElement("span",null,"\xa0|\xa0",s.a.createElement("a",{onClick:a.bind(this)},"(Logout)"))))),this.isLocal()&&s.a.createElement("div",{className:"new-status"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("textarea",{className:"input-status",value:this.state.newStatus,onChange:function(t){return e.handleNewStatusChange(t)},placeholder:"What's on your mind?"})),s.a.createElement("div",{className:"col-md-12 text-right"},s.a.createElement("button",{className:"btn btn-primary btn-lg",onClick:function(t){return e.handleNewStatusSubmit(t)}},"Submit"))),s.a.createElement("div",{className:"col-md-12 statuses"},this.state.isLoading&&s.a.createElement("span",null,"Loading..."),this.state.statuses.map(function(e){return s.a.createElement("div",{className:"status",key:e.id},e.text)}))))):null}},{key:"componentWillMount",value:function(){var e=this.props.userSession;this.setState({person:new h.Person(e.loadUserData().profile),username:e.loadUserData().username})}},{key:"handleNewStatusChange",value:function(e){this.setState({newStatus:e.target.value})}},{key:"handleNewStatusSubmit",value:function(e){this.saveNewStatus(this.state.newStatus),this.setState({newStatus:""})}},{key:"saveNewStatus",value:function(e){var t=this,a=this.props.userSession,n=this.state.statuses,s={id:this.state.statusIndex++,text:e.trim(),created_at:Date.now()};n.unshift(s);a.putFile("statuses.json",JSON.stringify(n),{encrypt:!1}).then(function(){t.setState({statuses:n})})}},{key:"fetchData",value:function(){var e=this,t=this.props.userSession;if(this.setState({isLoading:!0}),this.isLocal()){t.getFile("statuses.json",{decrypt:!1}).then(function(a){var n=JSON.parse(a||"[]");e.setState({person:new h.Person(t.loadUserData().profile),username:t.loadUserData().username,statusIndex:n.length,statuses:n})}).finally(function(){e.setState({isLoading:!1})})}else{var a=this.props.match.params.username;Object(h.lookupProfile)(a).then(function(t){e.setState({person:new h.Person(t),username:a})}).catch(function(e){console.log("could not resolve profile")});var n={username:a,decrypt:!1};t.getFile("statuses.json",n).then(function(t){var a=JSON.parse(t||"[]");e.setState({statusIndex:a.length,statuses:a})}).catch(function(e){console.log("could not fetch statuses")}).finally(function(){e.setState({isLoading:!1})})}}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"isLocal",value:function(){return!this.props.match.params.username}}]),t}(n.Component),v=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.handleSignIn;return s.a.createElement("div",{className:"panel-landing",id:"section-1"},s.a.createElement("h1",{className:"landing-heading"},"Hello, Blockstack!"),s.a.createElement("p",{className:"lead"},s.a.createElement("button",{className:"btn btn-primary btn-lg",id:"signin-button",onClick:e.bind(this)},"Sign In with Blockstack")))}}]),t}(n.Component),g=a(514),S=a(513),b=new h.AppConfig(["store_write","publish_data"]),w=new h.UserSession({appConfig:b}),E=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleSignIn",value:function(e){e.preventDefault(),w.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),w.signUserOut(window.location.origin)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"site-wrapper"},s.a.createElement("div",{className:"site-wrapper-inner"},w.isUserSignedIn()?s.a.createElement(g.a,null,s.a.createElement(S.a,{path:"/:username?",render:function(t){return s.a.createElement(f,Object.assign({userSession:w,handleSignOut:e.handleSignOut},t))}})):s.a.createElement(v,{userSession:w,handleSignIn:this.handleSignIn})))}},{key:"componentDidMount",value:function(){var e=this;w.isSignInPending()&&w.handlePendingSignIn().then(function(t){window.history.replaceState({},document.title,"/"),e.setState({userData:t})})}}]),t}(n.Component);a(508),a(509);r.a.render(s.a.createElement(o.a,null,s.a.createElement(E,null)),document.getElementById("root"))}},[[236,1,2]]]);
//# sourceMappingURL=main.5c1e7dd3.chunk.js.map