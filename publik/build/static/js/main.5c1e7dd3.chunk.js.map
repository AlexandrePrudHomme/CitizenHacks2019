{"version":3,"sources":["Profile.js","Signin.js","App.js","index.js"],"names":["avatarFallbackImage","Profile","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","person","name","avatarUrl","username","newStatus","statuses","statusIndex","isLoading","_this2","_this$props","handleSignOut","userSession","isSignInPending","react_default","a","createElement","className","src","id","isLocal","onClick","bind","value","onChange","e","handleNewStatusChange","placeholder","handleNewStatusSubmit","map","status","key","text","setState","Person","loadUserData","profile","event","target","saveNewStatus","statusText","_this3","trim","created_at","Date","now","unshift","putFile","JSON","stringify","encrypt","then","_this4","getFile","decrypt","file","parse","length","finally","match","params","lookupProfile","catch","error","console","log","options","fetchData","Component","Signin","handleSignIn","appConfig","AppConfig","UserSession","App","preventDefault","redirectToSignIn","signUserOut","window","location","origin","isUserSignedIn","Switch","Route","path","render","routeProps","Profile_Profile","assign","Signin_Signin","handlePendingSignIn","userData","history","replaceState","document","title","ReactDOM","BrowserRouter","App_App","getElementById"],"mappings":"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","file":"static/js/main.5c1e7dd3.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport {\n  Person,\n  lookupProfile\n} from 'blockstack';\n\nconst avatarFallbackImage = 'https://s3.amazonaws.com/onename/avatar-placeholder.png';\n\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n \n    this.state = {\n      person: {\n        name() {\n          return 'Anonymous';\n        },\n        avatarUrl() {\n          return avatarFallbackImage;\n        },\n      },\n      username: \"\",\n      newStatus: \"\",\n      statuses: [],\n      statusIndex: 0,\n      isLoading: false\n    };\n  }\n\n  render() {\n    const { handleSignOut, userSession } = this.props;\n    const { person } = this.state;\n    const { username } = this.state;\n   \n    return (\n      !userSession.isSignInPending() && person ?\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-offset-3 col-md-6\">\n            <div className=\"col-md-12\">\n              <div className=\"avatar-section\">\n                <img\n                  src={ person.avatarUrl() ? person.avatarUrl() : avatarFallbackImage }\n                  className=\"img-rounded avatar\"\n                  id=\"avatar-image\"\n                />\n                <div className=\"username\">\n                  <h1>\n                    <span id=\"heading-name\">{ person.name() ? person.name()\n                      : 'Nameless Person' }</span>\n                  </h1>\n                  <span>{username}</span>\n                  {this.isLocal() &&\n                    <span>\n                      &nbsp;|&nbsp;\n                      <a onClick={ handleSignOut.bind(this) }>(Logout)</a>\n                    </span>\n                  }\n                </div>\n              </div>\n            </div>\n            {this.isLocal() &&\n              <div className=\"new-status\">\n                <div className=\"col-md-12\">\n                  <textarea className=\"input-status\"\n                    value={this.state.newStatus}\n                    onChange={e => this.handleNewStatusChange(e)}\n                    placeholder=\"What's on your mind?\"\n                  />\n                </div>\n                <div className=\"col-md-12 text-right\">\n                  <button\n                    className=\"btn btn-primary btn-lg\"\n                    onClick={e => this.handleNewStatusSubmit(e)}\n                  >\n                    Submit\n                  </button>\n                </div>\n              </div>\n            }\n            <div className=\"col-md-12 statuses\">\n            {this.state.isLoading && <span>Loading...</span>}\n            {this.state.statuses.map((status) => (\n                <div className=\"status\" key={status.id}>\n                  {status.text}\n                </div>\n                )\n            )}\n            </div>\n          </div>\n        </div>\n      </div> : null\n    );\n    }\n\n  componentWillMount() {\n    const { userSession } = this.props\n    this.setState({\n      person: new Person(userSession.loadUserData().profile),\n      username: userSession.loadUserData().username\n    });\n  }\n\n  handleNewStatusChange(event) {\n    this.setState({newStatus: event.target.value})\n  }\n \n  handleNewStatusSubmit(event) {\n    this.saveNewStatus(this.state.newStatus)\n    this.setState({\n      newStatus: \"\"\n    })\n  }\n\n  saveNewStatus(statusText) {\n    const { userSession } = this.props\n    let statuses = this.state.statuses\n \n    let status = {\n      id: this.state.statusIndex++,\n      text: statusText.trim(),\n      created_at: Date.now()\n    }\n \n    statuses.unshift(status)\n    const options = { encrypt: false }\n    userSession.putFile('statuses.json', JSON.stringify(statuses), options)\n      .then(() => {\n        this.setState({\n          statuses: statuses\n        })\n      })\n  }\n\n  fetchData() {\n    const { userSession } = this.props\n    this.setState({ isLoading: true })\n    if (this.isLocal()) {\n      const options = { decrypt: false }\n      userSession.getFile('statuses.json', options)\n        .then((file) => {\n          var statuses = JSON.parse(file || '[]')\n          this.setState({\n            person: new Person(userSession.loadUserData().profile),\n            username: userSession.loadUserData().username,\n            statusIndex: statuses.length,\n            statuses: statuses,\n          })\n        })\n        .finally(() => {\n          this.setState({ isLoading: false })\n        })\n    } else {\n      const username = this.props.match.params.username\n \n      lookupProfile(username)\n        .then((profile) => {\n          this.setState({\n            person: new Person(profile),\n            username: username\n          })\n        })\n        .catch((error) => {\n          console.log('could not resolve profile')\n        })\n\n      const options = { username: username, decrypt: false }\n      userSession.getFile('statuses.json', options)\n        .then((file) => {\n          var statuses = JSON.parse(file || '[]')\n          this.setState({\n            statusIndex: statuses.length,\n            statuses: statuses\n          })\n        })\n        .catch((error) => {\n          console.log('could not fetch statuses')\n        })\n        .finally(() => {\n          this.setState({ isLoading: false })\n        })\n    }\n  }\n  \n  componentDidMount() {\n    this.fetchData()\n  }\n\n  isLocal() {\n    return this.props.match.params.username ? false : true\n  }\n}\n","import React, { Component } from 'react';\n\nexport default class Signin extends Component {\n\n  render() {\n    const { handleSignIn } = this.props;\n\n    return (\n      <div className=\"panel-landing\" id=\"section-1\">\n        <h1 className=\"landing-heading\">Hello, Blockstack!</h1>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signin-button\"\n            onClick={ handleSignIn.bind(this) }\n          >\n            Sign In with Blockstack\n          </button>\n        </p>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Profile from './Profile.js';\nimport Signin from './Signin.js';\nimport {\n  UserSession,\n  AppConfig\n} from 'blockstack';\nimport { Switch, Route } from 'react-router-dom';\n\nconst appConfig = new AppConfig(['store_write', 'publish_data'])\nconst userSession = new UserSession({ appConfig: appConfig })\n\nexport default class App extends Component {\n\n\n  handleSignIn(e) {\n    e.preventDefault();\n    userSession.redirectToSignIn();\n  }\n\n  handleSignOut(e) {\n    e.preventDefault();\n    userSession.signUserOut(window.location.origin);\n  }\n\n  render() {\n    return (\n      <div className=\"site-wrapper\">\n        <div className=\"site-wrapper-inner\">\n          { !userSession.isUserSignedIn() ?\n            <Signin userSession={userSession} handleSignIn={ this.handleSignIn } />\n            :    <Switch>\n            <Route\n              path='/:username?'\n              render={\n                routeProps => \n                  <Profile \n                    userSession={userSession} \n                    handleSignOut={ this.handleSignOut } \n                    {...routeProps} \n                  />\n              }\n            />\n          </Switch>\n          }\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    if (userSession.isSignInPending()) {\n      userSession.handlePendingSignIn().then((userData) => {\n        window.history.replaceState({}, document.title, \"/\")\n        this.setState({ userData: userData})\n      });\n    }\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App.js';\n\n// Require Sass file so webpack can build it\nimport 'bootstrap/dist/css/bootstrap.css';\nimport'./styles/style.css';\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}